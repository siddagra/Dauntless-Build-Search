function windowResize(){document.getElementsByTagName("html")[0].style.zoom=window.innerWidth/1920}function encode(e,t=encodingChars.length,n=urlVersion){let l=n+"";for(let n=0;n<e.length;n++){0!=n&&(l+="_");let r=e[n];if(0==r.length)continue;let i=Math.max.apply(null,r)+1,s=[],o=[];for(let e=1;e<10;e++)s.push(e*(Math.log10(i)/Math.log10(t))),o.push(s[e-1]%1);let a=Math.max.apply(null,o),d=o.indexOf(a)+1,p=Math.ceil(s[d-1]),c=i;l+=encodingChars.substr(c%t,1),c=Math.floor(c/t),l+=encodingChars.substr(c%t,1);for(let e=r.length;e%d!=0;e++)r.push(0);for(let e=0;e<r.length;e+=d){let n=0;for(let t=0;t<d;t++)n=n*i+r[e+t];for(let e=0;e<p;e++)l+=encodingChars.substr(n%t,1),n=Math.floor(n/t)}}return l}function decode(e,t=encodingChars.length){let n=parseInt(encodingChars.indexOf(e[0]));if(5==n){e=e.substr(1);let n=[];e=e.split("_");for(let l=0;l<e.length;l++){n.push([]);let r=e[l].split("").map(e=>encodingChars.indexOf(e)),i=0;i=i*t+r[1],i=i*t+r[0],r.shift(),r.shift();let s=[],o=[];for(let e=1;e<10;e++)s.push(e*(Math.log10(i)/Math.log10(t))),o.push(s[e-1]%1);let a=Math.max.apply(null,o),d=o.indexOf(a)+1,p=Math.ceil(s[d-1]);for(let e=0;e<r.length;e+=p){let s=0,o=[];for(let n=p-1;0<=n;n--)s=s*t+r[e+n];for(let e=0;e<d;e++)o.push(s%i),s=Math.floor(s/i);o=o.reverse();for(let e=0;e<d&&0!=o[e];e++)n[l].push(o[e])}}return n}return-1}function EmployWorkers(){window.scrollY>1e3&&window.scrollTo(0,0);var e=[],t=[];urlPerks=[],urlLocksArmor=[],urlLocksWeapon=[];var n=document.getElementsByClassName("PerkCard");for(i=0;i<n.length;i++)e.push({j:parseInt(n[i].id.split("_")[0]),k:parseInt(n[i].id.split("_")[1])}),t.push(parseInt(n[i].children[1].firstChild.textContent.split(" ")[0].substring(1))/3),urlPerks.push(perkList[e[i].j][e[i].k].map);for(0==urlPerks.length&&urlPerks.push(0),0==urlPerks.length&&urlPerks.push(0);workerList.length>0;)workerList[0].terminate(),workerList.shift();var l=new Worker("./js/webWorker.min.js");workerList.push(l),workerList[0].postMessage({iarmor:armorIndices,iweapon:weaponIndices,perkListLengths:perkListLengths,indexPerk:e,indexPerkRank:t,lock:getLockIndices(),legendaryWeapon:document.getElementById("LegendaryWeapon").checked}),history.pushState(null,null,"?"+encode([urlPerks,t,urlLocksWeapon,urlLocksArmor])),workerList[0].onmessage=function(e){if(null!=e.data.bonusPerks){var t=e.data.bonusPerks;applyBonusPerksUI(t)}if(null!=e.data.set){var n=e.data.set;printTableUI(n)}}}function applyBonusPerksUI(e){for(i=0;i<e.length;i++)"btn disabled"!=document.getElementById(e[i].stringID).className&&(e[i].value>1?document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus6":e[i].value>0?document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus3":document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus0");document.getElementById("Builds Table Body").textContent=""}function clearTableUI(){let e=document.getElementsByTagName("td"),t=e.length;for(let e=0;e<t;e++)document.getElementsByTagName("td")[e].textContent=""}function printArmorUI(e,t,n){let l=document.createElement("td"),r=document.createElement("div");r.className="PrintEquipment";let i=document.createElement("img");i.src="."+e.icon,i.className="ArmorIcon",r.appendChild(i);let s=document.createElement("div");s.textContent=e.id,r.appendChild(s),l.appendChild(r),n.appendChild(l)}function printWeaponUI(e,t,n){let l=document.createElement("td"),r=document.createElement("div");r.className="PrintEquipment";let i=document.createElement("img");i.src="."+e.icon,i.className="ArmorIcon",r.appendChild(i);let s=document.createElement("div");document.getElementById("LegendaryWeapon").checked?s.textContent="Legendary "+e.id+" "+e.type:s.textContent=e.id+" "+e.type,r.appendChild(s),l.appendChild(r),n.appendChild(l)}function generateDBurl(e,t){let n=[4,weapon[e.id[4]][e.id[5]].DBmap,15];perkList[e.cell[4].j][e.cell[4].k].type==weapon[e.id[4]][e.id[5]].cells[2]&&perkList[e.cell[5].j][e.cell[5].k].type==weapon[e.id[4]][e.id[5]].cells[1]&&n.push(perkList[e.cell[4].j][e.cell[4].k].DBmap,perkList[e.cell[5].j][e.cell[5].k].DBmap),perkList[e.cell[4].j][e.cell[4].k].type==weapon[e.id[4]][e.id[5]].cells[1]&&perkList[e.cell[5].j][e.cell[5].k].type==weapon[e.id[4]][e.id[5]].cells[2]?n.push(perkList[e.cell[5].j][e.cell[5].k].DBmap,perkList[e.cell[4].j][e.cell[4].k].DBmap):n.push(perkList[e.cell[4].j][e.cell[4].k].DBmap,perkList[e.cell[5].j][e.cell[5].k].DBmap),weapon[e.id[4]][e.id[5]].type==weaponType[0]?n.push(3,2,0,0,0,0):weapon[e.id[4]][e.id[5]].type==weaponType[1]?n.push(5,3,0,0,0,0):weapon[e.id[4]][e.id[5]].type==weaponType[5]?n.push(7,8,0,0,0,0):weapon[e.id[4]][e.id[5]].type==weaponType[3]?n.push(5,3,0,0,0,0):weapon[e.id[4]][e.id[5]].type==weaponType[6]?n.push(5,8,0,0,0,0):weapon[e.id[4]][e.id[5]].type==weaponType[3]?n.push(5,1,0,0,0,0):weapon[e.id[4]][e.id[5]].type==weaponType[4]?n.push(0,8,9,19,0,25):n.push(0,0,0,0,0,0),n.push(head[e.id[0]].DBmap,15,perkList[e.cell[0].j][e.cell[0].k].DBmap,torso[e.id[1]].DBmap,15,perkList[e.cell[1].j][e.cell[1].k].DBmap,arms[e.id[2]].DBmap,15,perkList[e.cell[2].j][e.cell[2].k].DBmap,legs[e.id[3]].DBmap,15,perkList[e.cell[3].j][e.cell[3].k].DBmap,2,perkList[e.cell[6].j][e.cell[6].k].DBmap),n.push(0);let l=document.createElement("td"),r=document.createElement("a");r.href="https://www.dauntless-builder.com/b/"+hashids.encode(n),r.target="_blank";let i=document.createElement("img");i.src="./assets/export.png",i.className="ArmorIcon",r.appendChild(i),l.appendChild(r),t.appendChild(l)}function printTableUI(e){let t=document.createElement("tr");printArmorUI(head[e.id[0]],e.cell[0],t),printArmorUI(torso[e.id[1]],e.cell[1],t),printArmorUI(arms[e.id[2]],e.cell[2],t),printArmorUI(legs[e.id[3]],e.cell[3],t),printWeaponUI(weapon[e.id[4]][e.id[5]],[e.cell[4],e.cell[5]],t),generateDBurl(e,t),BuildsFoundTable.appendChild(t),workerList[0].postMessage(-23)}function PerkClicked(e){let t;t=e.target.classList.contains("plus6")?"6":"3",e.target.className="btn disabled";let n=document.createElement("div");n.className="animated bounceInLeft faster",document.getElementById("SelectedPerks").appendChild(n);let l=document.createElement("div");l.className="displayHorizontal",l.id=e.target.id,n.appendChild(l);let r=document.createElement("div");r.className="rankChange",l.appendChild(r);let i=document.createElement("img");i.className="rankIcon waves-effect",i.src="./assets/upArrow.png",i.addEventListener("click",PlusButtonCLicked),r.appendChild(i);let s=document.createElement("img");s.className="rankIcon",s.src="./assets/downArrow.png",s.addEventListener("click",MinusButtonCLicked),r.appendChild(s);let o=document.createElement("div");o.className="PerkCard tooltipped",o.setAttribute("data-position","left");let a="";for(let t=0;t<Object.keys(perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects).length;t++)a=a+String(t+1)+": "+perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects[t].description+"\n";o.setAttribute("data-tooltip",a),o.id=e.target.id,l.appendChild(o),hasTouch()||M.Tooltip.init(o,{outDuration:0,inDuration:400,enterDelay:500,margin:0,transitionMovement:3});let d=document.createElement("div"),p=document.createElement("img");d.className="PerkCardIcon",p.src="./assets/icons/perks/"+cellType[e.target.id.split("_")[0]]+".png",d.appendChild(p),o.appendChild(d);let c=document.createElement("div");c.className="PerkCardText",o.appendChild(c);let m=document.createElement("div");m.className="PerkCardTitle",m.appendChild(document.createTextNode("+"+t+" "+e.target.textContent)),c.appendChild(m),divPerkCardContent=document.createElement("div"),divPerkCardContent.appendChild(document.createTextNode(perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects[parseInt(t)-1].description)),c.appendChild(divPerkCardContent),EmployWorkers()}function PlusButtonCLicked(){let e=event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent,t=parseInt(e.split(" ")[0].substring(1)),n=e.substring(e.indexOf(" "));
  if (t + 3 >= 69) {
    t = 66;
    alert("Nice!");
  }event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent="+"+String(t+3)+" "+n,event.target.parentElement.parentElement.children[1].children[1].children[1].textContent=perkList[parseInt(event.target.parentElement.parentElement.id.split("_")[0])][parseInt(event.target.parentElement.parentElement.id.split("_")[1])].effects[String(t+2)].description,EmployWorkers()}function MinusButtonCLicked(){let e=event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent,t=parseInt(e.split(" ")[0].substring(1)),n=e.substring(e.indexOf(" "));t>3?(event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent="+"+String(t-3)+" "+n,event.target.parentElement.parentElement.children[1].children[1].children[1].textContent=perkList[parseInt(event.target.parentElement.parentElement.id.split("_")[0])][parseInt(event.target.parentElement.parentElement.id.split("_")[1])].effects[String(t-4)].description):(document.getElementById(event.target.parentElement.parentElement.id).className="waves-effect waves-light btn grey lighten-4 black-text",event.target.parentElement.parentElement.parentElement.remove(event.target.parentElement.parentElement)),EmployWorkers()}function generateRandomBuild(){function e(e){return Math.floor(Math.random()*e)}function t(t){return perkList[cellType.indexOf(t)][e(perkList[cellType.indexOf(t)].length)]}function n(e){l.push(e.DBmap,15),l.push(t(e.cell).DBmap)}let l=[3],r=weapon.flat(1),i=r[e(r.length)];console.log(i),l.push(i.DBmap,15),l.push(t(i.cells[0]).DBmap),l.push(t(i.cells[1]).DBmap),console.log(l),l.push(0,0,0,0,0,0);let s=head[e(head.length)];n(s);let o=torso[e(torso.length)];n(o);let a=arms[e(arms.length)];n(a);let d=legs[e(legs.length)];n(d),l.push(e(8)),l.push(t("Utility").DBmap),window.open("/b/"+hashids.encode(l))}function getLockIndices(){console.log(287);let e=[];for(e.push([]),i=0;i<weapon.length;i++)document.getElementById("LockCheckbox 0_"+String(i)).checked&&(console.log(document.getElementById("LockCheckbox 0_"+String(i))),e[0].push(i),urlLocksWeapon.push(weaponCheckboxTimeOrdered.indexOf(weaponType[i])));for(j=1;j<armorTypeLength+2;j++)for(e.push([]),i=0;i<idList.length;i++)document.getElementById("LockCheckbox "+String(j)+"_"+String(i))&&document.getElementById("LockCheckbox "+String(j)+"_"+String(i)).checked&&(e[j].push(i),console.log(document.getElementById("LockCheckbox 0_"+String(i))),1==j&&urlLocksWeapon.push(weaponCheckboxTimeOrdered.indexOf(idList[i])),2==j&&urlLocksArmor.push(head[i].map),3==j&&urlLocksArmor.push(torso[i].map),4==j&&urlLocksArmor.push(arms[i].map),5==j&&urlLocksArmor.push(legs[i].map));for(i=0;i<e.length;i++)if(e[i].length>0)return e;return-1}function setCookie(e,t,n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3);var r="expires="+l.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}function saveFilterConfigCookie(){let e=window.location.search.split("_")[2];setCookie("FilterConfigURL",e,365)};window.addEventListener("DOMContentLoaded",()=>{let e=document.getElementsByClassName("sliding-tabs");for(let l=0;l<e.length;l++){let r=e[l].getElementsByClassName("navWrapper")[0],s=r.getElementsByTagName("a"),o=r.getElementsByClassName("selector")[0],a=r.getElementsByClassName("active")[0];o.style.left=a.offsetLeft+"px",o.style.width=a.clientWidth+"px";for(let e=0;e<s.length;e++)s[e].addEventListener("click",function(e){e.preventDefault(),n(document.getElementById(e.target.href.split("#")[1])),t(e.target)});function t(e){a.classList.remove("active"),a=e,a.classList.add("active"),o.style.left=a.offsetLeft+"px",o.style.width=a.clientWidth+"px"}function n(t){let n=e[l].getElementsByClassName("slider")[0];n.scroll(t.offsetLeft,0)}let d=new IntersectionObserver(function(e,n){e.forEach(e=>{if(e.isIntersecting)for(let n=0;n<s.length;n++)s[n].href.split("#")[1]==e.target.id&&t(s[n])})},{root:e[l].getElementsByClassName("slider")[0],threshold:.8}),p=document.getElementsByClassName("slide");for(i=0;i<p.length;i++)d.observe(p[i])}});var perkButtonIdList=[];perkButtonIdList.push("");var perkButtonElems=document.querySelectorAll(".PerkButton");for(let e=0;e<perkButtonElems.length;e++)perkButtonElems[e].addEventListener("click",PerkClicked),perkButtonIdList.push(perkButtonElems[e].id);var LockCheckboxIdList=[];LockCheckboxIdList.push("");var LockCheckboxElems=document.querySelectorAll(".LockCheckbox");for(let e=0;e<LockCheckboxElems.length;e++)LockCheckboxElems[e].addEventListener("click",EmployWorkers),LockCheckboxIdList.push(LockCheckboxElems[e].id);var urlVersion=5,urlRanks=[],urlPerks=[],urlLocksWeapon=[],urlLocksArmor=[];const encodingChars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";var workerList=[],armorTypeLength=4,BuildsFoundTable=document.getElementById("Builds Table Body"),hashids=new Hashids.default("spicy",8,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"),queryString=window.location.search.substr(1);if("5"==queryString[0]){queryString.substr(1),queryString=decode(queryString);for(let e=0;e<queryString[0].length;e++)for(let t=0;t<perkList.length;t++)for(let n=0;n<perkList[t].length;n++)perkList[t][n].map==queryString[0][e]&&document.getElementById(t+"_"+n).click();var PerkCardList=document.getElementsByClassName("PerkCard");for(let e=0;e<queryString[1].length;e++)PerkCardList[e].children[1].firstChild.textContent="+"+String(3*queryString[1][e])+" "+PerkCardList[e].children[1].firstChild.textContent.substring(PerkCardList[e].children[1].firstChild.textContent.indexOf(" ")+1);for(let e=0;e<queryString[2].length;e++){let t=document.getElementById("LockCheckbox 0_"+weaponType.indexOf(weaponCheckboxTimeOrdered[queryString[2][e]]))||document.getElementById("LockCheckbox 1_"+idList.indexOf(weaponCheckboxTimeOrdered[queryString[2][e]]));t&&t.click()}function findArmorByMap(e,t){for(let n=0,l=e.length;n<l;n++)if(e[n].map==t)return n;return-1}for(let e=0;e<queryString[3].length;e++){let t=document.getElementById("LockCheckbox 2_"+findArmorByMap(head,queryString[3][e]))||document.getElementById("LockCheckbox 3_"+findArmorByMap(torso,queryString[3][e]))||document.getElementById("LockCheckbox 4_"+findArmorByMap(arms,queryString[3][e]))||document.getElementById("LockCheckbox 5_"+findArmorByMap(legs,queryString[3][e]));t&&t.click()}EmployWorkers()}
