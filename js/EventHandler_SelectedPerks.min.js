function windowResize(){document.getElementsByTagName("html")[0].style.zoom=window.innerWidth/1920}windowResize(),window.addEventListener("DOMContentLoaded",()=>{let e=document.getElementsByClassName("sliding-tabs");for(let r=0;r<e.length;r++){let l=e[r].getElementsByClassName("navWrapper")[0],s=l.getElementsByTagName("a"),a=l.getElementsByClassName("selector")[0],o=l.getElementsByClassName("active")[0];a.style.left=o.offsetLeft+"px",a.style.width=o.clientWidth+"px";for(let e=0;e<s.length;e++)s[e].addEventListener("click",function(e){e.preventDefault(),n(document.getElementById(e.target.href.split("#")[1])),t(e.target)});function t(e){o.classList.remove("active"),(o=e).classList.add("active"),a.style.left=o.offsetLeft+"px",a.style.width=o.clientWidth+"px"}function n(t){e[r].getElementsByClassName("slider")[0].scroll(t.offsetLeft,0)}let d=new IntersectionObserver(function(e,n){e.forEach(e=>{if(e.isIntersecting)for(let n=0;n<s.length;n++)s[n].href.split("#")[1]==e.target.id&&t(s[n])})},{root:e[r].getElementsByClassName("slider")[0],threshold:.8}),p=document.getElementsByClassName("slide");for(i=0;i<p.length;i++)d.observe(p[i])}});var perkButtonIdList=[];perkButtonIdList.push("");var perkButtonElems=document.querySelectorAll(".PerkButton");for(let e=0;e<perkButtonElems.length;e++)perkButtonElems[e].addEventListener("click",PerkClicked),perkButtonIdList.push(perkButtonElems[e].id);var LockCheckboxIdList=[];LockCheckboxIdList.push("");var LockCheckboxElems=document.querySelectorAll(".LockCheckbox");for(let e=0;e<LockCheckboxElems.length;e++)LockCheckboxElems[e].addEventListener("click",EmployWorkers),LockCheckboxIdList.push(LockCheckboxElems[e].id);var urlVersion=5,urlRanks=[],urlPerks=[],urlLocksWeapon=[],urlLocksArmor=[];const encodingChars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function encode(e,t=encodingChars.length,n=urlVersion){let r=n+"";for(let n=0;n<e.length;n++){0!=n&&(r+="_");let l=e[n];if(0==l.length)continue;let i=Math.max.apply(null,l)+1,s=[],a=[];for(let e=1;e<10;e++)s.push(e*(Math.log10(i)/Math.log10(t))),a.push(s[e-1]%1);let o=Math.max.apply(null,a),d=a.indexOf(o)+1,p=Math.ceil(s[d-1]),c=i;r+=encodingChars.substr(c%t,1),c=Math.floor(c/t),r+=encodingChars.substr(c%t,1);for(let e=l.length;e%d!=0;e++)l.push(0);for(let e=0;e<l.length;e+=d){let n=0;for(let t=0;t<d;t++)n=n*i+l[e+t];for(let e=0;e<p;e++)r+=encodingChars.substr(n%t,1),n=Math.floor(n/t)}}return r}function decode(e,t=encodingChars.length){if(5==parseInt(encodingChars.indexOf(e[0]))){let n=[];e=(e=e.substr(1)).split("_");for(let r=0;r<e.length;r++){n.push([]);let l=e[r].split("").map(e=>encodingChars.indexOf(e)),i=0;i=(i=i*t+l[1])*t+l[0],l.shift(),l.shift();let s=[],a=[];for(let e=1;e<10;e++)s.push(e*(Math.log10(i)/Math.log10(t))),a.push(s[e-1]%1);let o=Math.max.apply(null,a),d=a.indexOf(o)+1,p=Math.ceil(s[d-1]);for(let e=0;e<l.length;e+=p){let s=0,a=[];for(let n=p-1;0<=n;n--)s=s*t+l[e+n];for(let e=0;e<d;e++)a.push(s%i),s=Math.floor(s/i);a=a.reverse();for(let e=0;e<d&&0!=a[e];e++)n[r].push(a[e])}}return n}return-1}var workerList=[],armorTypeLength=4;function EmployWorkers(){window.scrollY>1e3&&window.scrollTo(0,0);var e=[],t=[];urlPerks=[],urlLocksArmor=[],urlLocksWeapon=[];var n=document.getElementsByClassName("PerkCard");for(i=0;i<n.length;i++)e.push({j:parseInt(n[i].id.split("_")[0]),k:parseInt(n[i].id.split("_")[1])}),t.push(parseInt(n[i].children[1].firstChild.textContent.split(" ")[0].substring(1))/3),urlPerks.push(perkList[e[i].j][e[i].k].map);for(0==urlPerks.length&&urlPerks.push(0),0==urlPerks.length&&urlPerks.push(0);workerList.length>0;)workerList[0].terminate(),workerList.shift();var r=new Worker("./js/webWorker.min.js");workerList.push(r),workerList[0].postMessage({iarmor:armorIndices,iweapon:weaponIndices,perkListLengths:perkListLengths,indexPerk:e,indexPerkRank:t,lock:getLockIndices(),legendaryWeapon:document.getElementById("LegendaryWeapon").checked}),history.pushState(null,null,"?"+encode([urlPerks,t,urlLocksWeapon,urlLocksArmor])),workerList[0].onmessage=function(e){null!=e.data.bonusPerks&&applyBonusPerksUI(e.data.bonusPerks);null!=e.data.set&&printTableUI(e.data.set)}}function applyBonusPerksUI(e){for(i=0;i<e.length;i++)"btn disabled"!=document.getElementById(e[i].stringID).className&&(e[i].value>1?document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus6":e[i].value>0?document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus3":document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus0");document.getElementById("Builds Table Body").textContent=""}function clearTableUI(){let e=document.getElementsByTagName("td").length;for(let t=0;t<e;t++)document.getElementsByTagName("td")[t].textContent=""}var BuildsFoundTable=document.getElementById("Builds Table Body");function printArmorUI(e,t,n){let r=document.createElement("td"),l=document.createElement("div");l.className="PrintEquipment";let i=document.createElement("img");i.src=e.icon,i.className="ArmorIcon",l.appendChild(i);let s=document.createElement("div");s.textContent=e.id,l.appendChild(s),r.appendChild(l),n.appendChild(r)}function printWeaponUI(e,t,n){let r=document.createElement("td"),l=document.createElement("div");l.className="PrintEquipment";let i=document.createElement("img");i.src=e.icon,i.className="ArmorIcon",l.appendChild(i);let s=document.createElement("div");document.getElementById("LegendaryWeapon").checked?s.textContent="Legendary "+e.id+" "+e.type:s.textContent=e.id+" "+e.type,l.appendChild(s),r.appendChild(l),n.appendChild(r)}var hashids=new Hashids.default("spicy",8,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");function generateDBurl(e,t){itemWeapon=weapon[e.id[4]][e.id[5]];let n=[6,0];document.getElementById("LegendaryWeapon").checked?n.push(legendaryWeaponsList[itemWeapon.elemental][itemWeapon.type].DBmap,1):n.push(itemWeapon.DBmap,1),perkList[e.cell[4].j][e.cell[4].k].type==itemWeapon.cells[2]&&perkList[e.cell[5].j][e.cell[5].k].type==itemWeapon.cells[1]&&n.push(perkList[e.cell[4].j][e.cell[4].k].DBmap,perkList[e.cell[5].j][e.cell[5].k].DBmap),perkList[e.cell[4].j][e.cell[4].k].type==itemWeapon.cells[1]&&perkList[e.cell[5].j][e.cell[5].k].type==itemWeapon.cells[2]?n.push(perkList[e.cell[5].j][e.cell[5].k].DBmap,perkList[e.cell[4].j][e.cell[4].k].DBmap):n.push(perkList[e.cell[4].j][e.cell[4].k].DBmap,perkList[e.cell[5].j][e.cell[5].k].DBmap),itemWeapon.type==weaponType[0]?n.push(3,2,0):itemWeapon.type==weaponType[1]?n.push(5,2,0):itemWeapon.type==weaponType[2]?n.push(5,1,0):itemWeapon.type==weaponType[3]?n.push(5,1,0):itemWeapon.type==weaponType[4]?n.push(8,9,25):itemWeapon.type==weaponType[5]?n.push(5,9,0):itemWeapon.type==weaponType[6]?n.push(5,3,0):n.push(0,0,0),document.getElementById("LegendaryWeapon").checked?n.push(itemWeapon.DBmap):n.push(0),n.push(head[e.id[0]].DBmap,1,perkList[e.cell[0].j][e.cell[0].k].DBmap,torso[e.id[1]].DBmap,1,perkList[e.cell[1].j][e.cell[1].k].DBmap,arms[e.id[2]].DBmap,1,perkList[e.cell[2].j][e.cell[2].k].DBmap,legs[e.id[3]].DBmap,1,perkList[e.cell[3].j][e.cell[3].k].DBmap,7,perkList[e.cell[6].j][e.cell[6].k].DBmap),n.push(0);let r=document.createElement("td"),l=document.createElement("a");l.href="https://www.dauntless-builder.site#/b/"+hashids.encode(n),l.target="_blank";let i=document.createElement("img");i.src="assets/export.png",i.className="ArmorIcon",l.appendChild(i),r.appendChild(l),t.appendChild(r)}function printTableUI(e){let t=document.createElement("tr");printArmorUI(head[e.id[0]],e.cell[0],t),printArmorUI(torso[e.id[1]],e.cell[1],t),printArmorUI(arms[e.id[2]],e.cell[2],t),printArmorUI(legs[e.id[3]],e.cell[3],t),printWeaponUI(weapon[e.id[4]][e.id[5]],[e.cell[4],e.cell[5]],t),generateDBurl(e,t),BuildsFoundTable.appendChild(t),workerList[0].postMessage(-23)}function PerkClicked(e){let t;t=e.target.classList.contains("plus6")?"6":"3",e.target.className="btn disabled";let n=document.createElement("div");n.className="animated bounceInLeft faster",document.getElementById("SelectedPerks").appendChild(n);let r=document.createElement("div");r.className="displayHorizontal",r.id=e.target.id,n.appendChild(r);let l=document.createElement("div");l.className="rankChange",r.appendChild(l);let i=document.createElement("img");i.className="rankIcon waves-effect",i.src="assets/upArrow.png",i.addEventListener("click",PlusButtonCLicked),l.appendChild(i);let s=document.createElement("img");s.className="rankIcon",s.src="assets/downArrow.png",s.addEventListener("click",MinusButtonCLicked),l.appendChild(s);let a=document.createElement("div");a.className="PerkCard tooltipped",a.setAttribute("data-position","left");let o="";for(let t=0;t<Object.keys(perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects).length;t++)o=o+String(t+1)+": "+perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects[t].description+"\n";a.setAttribute("data-tooltip",o),a.id=e.target.id,r.appendChild(a),hasTouch()||M.Tooltip.init(a,{outDuration:0,inDuration:400,enterDelay:500,margin:0,transitionMovement:3});let d=document.createElement("div"),p=document.createElement("img");d.className="PerkCardIcon",p.src="assets/icons/perks/"+cellType[e.target.id.split("_")[0]]+".png",d.appendChild(p),a.appendChild(d);let c=document.createElement("div");c.className="PerkCardText",a.appendChild(c);let m=document.createElement("div");m.className="PerkCardTitle",m.appendChild(document.createTextNode("+"+t+" "+e.target.textContent)),c.appendChild(m),divPerkCardContent=document.createElement("div"),divPerkCardContent.appendChild(document.createTextNode(perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects[parseInt(t)-1].description)),c.appendChild(divPerkCardContent),EmployWorkers()}function PlusButtonCLicked(){let e=event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent,t=parseInt(e.split(" ")[0].substring(1)),n=e.substring(e.indexOf(" "));event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent="+"+String(t+3)+" "+n,event.target.parentElement.parentElement.children[1].children[1].children[1].textContent=perkList[parseInt(event.target.parentElement.parentElement.id.split("_")[0])][parseInt(event.target.parentElement.parentElement.id.split("_")[1])].effects[String(t+2)].description,EmployWorkers()}function MinusButtonCLicked(){let e=event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent,t=parseInt(e.split(" ")[0].substring(1)),n=e.substring(e.indexOf(" "));t>3?(event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent="+"+String(t-3)+" "+n,event.target.parentElement.parentElement.children[1].children[1].children[1].textContent=perkList[parseInt(event.target.parentElement.parentElement.id.split("_")[0])][parseInt(event.target.parentElement.parentElement.id.split("_")[1])].effects[String(t-4)].description):(document.getElementById(event.target.parentElement.parentElement.id).className="waves-effect waves-light btn grey lighten-4 black-text",event.target.parentElement.parentElement.parentElement.remove(event.target.parentElement.parentElement)),EmployWorkers()}function generateRandomBuild(){function e(e){return Math.floor(Math.random()*e)}function t(t){return perkList[cellType.indexOf(t)][e(perkList[cellType.indexOf(t)].length)]}function n(e){r.push(e.DBmap,15),r.push(t(e.cell).DBmap)}let r=[3],l=weapon.flat(1),i=l[e(l.length)];r.push(i.DBmap,15),r.push(t(i.cells[0]).DBmap),r.push(t(i.cells[1]).DBmap),r.push(0,0,0,0,0,0),n(head[e(head.length)]),n(torso[e(torso.length)]),n(arms[e(arms.length)]),n(legs[e(legs.length)]),r.push(e(8)),r.push(t("Utility").DBmap),window.open("https://www.dauntless-builder.com/b/"+hashids.encode(r))}function getLockIndices(){let e=[];for(e.push([]),i=0;i<weapon.length;i++)document.getElementById("LockCheckbox 0_"+String(i)).checked&&(e[0].push(i),urlLocksWeapon.push(weaponCheckboxTimeOrdered.indexOf(weaponType[i])));for(j=1;j<armorTypeLength+2;j++)for(e.push([]),i=0;i<idList.length;i++)document.getElementById("LockCheckbox "+String(j)+"_"+String(i))&&document.getElementById("LockCheckbox "+String(j)+"_"+String(i)).checked&&(e[j].push(i),1==j&&urlLocksWeapon.push(weaponCheckboxTimeOrdered.indexOf(idList[i])),2==j&&urlLocksArmor.push(head[i].map),3==j&&urlLocksArmor.push(torso[i].map),4==j&&urlLocksArmor.push(arms[i].map),5==j&&urlLocksArmor.push(legs[i].map));for(i=0;i<e.length;i++)if(e[i].length>0)return e;return-1}function setCookie(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var l="expires="+r.toUTCString();document.cookie=e+"="+t+";"+l+";path=/"}function saveFilterConfigCookie(){setCookie("FilterConfigURL",window.location.search.split("_")[2],365)}var queryString=window.location.search.substr(1);if("5"==queryString[0]){queryString.substr(1),queryString=decode(queryString);for(let e=0;e<queryString[0].length;e++)for(let t=0;t<perkList.length;t++)for(let n=0;n<perkList[t].length;n++)perkList[t][n].map==queryString[0][e]&&document.getElementById(t+"_"+n).click();var PerkCardList=document.getElementsByClassName("PerkCard");for(let e=0;e<queryString[1].length;e++)PerkCardList[e].children[1].firstChild.textContent="+"+String(3*queryString[1][e])+" "+PerkCardList[e].children[1].firstChild.textContent.substring(PerkCardList[e].children[1].firstChild.textContent.indexOf(" ")+1);for(let e=0;e<queryString[2].length;e++){let t=document.getElementById("LockCheckbox 0_"+weaponType.indexOf(weaponCheckboxTimeOrdered[queryString[2][e]]))||document.getElementById("LockCheckbox 1_"+idList.indexOf(weaponCheckboxTimeOrdered[queryString[2][e]]));t&&t.click()}function findArmorByMap(e,t){for(let n=0,r=e.length;n<r;n++)if(e[n].map==t)return n;return-1}for(let e=0;e<queryString[3].length;e++){let t=document.getElementById("LockCheckbox 2_"+findArmorByMap(head,queryString[3][e]))||document.getElementById("LockCheckbox 3_"+findArmorByMap(torso,queryString[3][e]))||document.getElementById("LockCheckbox 4_"+findArmorByMap(arms,queryString[3][e]))||document.getElementById("LockCheckbox 5_"+findArmorByMap(legs,queryString[3][e]));t&&t.click()}EmployWorkers()}