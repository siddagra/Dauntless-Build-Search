function GreenLight(){var e=[];if(0==greenLight){for(j=1;j<perkListLength.length;j++)for(k=0;k<perkListLength[j];k++)e.push({stringID:String(j)+"_"+String(k),value:2});greenLight=!0,this.postMessage({bonusPerks:e})}}function indexOfPerk(e,l){let k=l.length;for(let r=0;r<k;r++)if(e.k==l[r].k&&e.j==l[r].j)return r;return-1}function checkLockbyID(e,l){for(let k=0;k<lock[l].length;k++)if(e.id==lock[l][k])return!0;return!1}function search(l,r){var t=[],p=[],o=[0,0,0,0,0,0],n=[],f=[],s=[],m=[!1,!1,!1];filtSet=[];var o=[0,0,0,0,0,0],g=[0,0,0,0,0],S=0,L=0,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];tempperk=[];var y=iweapon.length;for(i=0;i<y;i++)n.push(iweapon[i].length);var C=iarmor.length;for(i=0;i<C;i++)f.push(iarmor[i].length);for(i=0;i<C;i++)p.push([]),m.push(!1);var T=l.length;for(j=0;j<y;j++)for(k=0;k<n[j];k++)127==iweapon[j][k].id&&t.push({e:j,f:k});for(j=0;j<C;j++)for(k=0;k<f[j];k++)127==iarmor[j][k].id&&p[j].push(k);for(h=0;h<T;h++){for(j=0;j<y;j++)for(k=0;k<n[j];k++)iweapon[j][k].perk.j==l[h].j&&iweapon[j][k].perk.k==l[h].k&&t.push({e:j,f:k});for(j=0;j<C;j++)for(k=0;k<f[j];k++)iarmor[j][k].perk.j==l[h].j&&iarmor[j][k].perk.k==l[h].k&&p[j].push(k)}for(let e=0;e<lock.length;e++)if(1==lockBool[e])if(0==e){t.splice(0);for(let e=0;e<lock[0].length;e++)for(k=0;k<n[lock[0][e]];k++)t.push({e:lock[0][e],f:k})}else if(1==e)for(t.splice(0),j=0;j<y;j++)for(k=0;k<n[j];k++)checkLockbyID(iweapon[j][k],1)&&t.push({e:j,f:k});else if(e>1)for(p[e-2].splice(0),k=0;k<f[e-2];k++)checkLockbyID(iarmor[e-2][k],e)&&p[e-2].push(k);if(lockBool[0]&&lockBool[1]){t.splice(0);for(let e=0;e<lock[0].length;e++)for(let l=0;l<n[lock[0][e]];l++)checkLockbyID(iweapon[lock[0][e]][l],1)&&t.push({e:lock[0][e],f:l})}r.slice();var x=t.length;for(i=0;i<C;i++)s.push(p[i].length);for(i=0;i<r.length;i++)L+=r[i];for(S=12-L,i=0;i<T;i++)o[l[i].j]+=r[i];for(o[5]>0&&(o[5]--,S++),i=0;i<r.length;i++)tempperk.push(r[i]);for(this.console.time("search"),S>11&&GreenLight(),e=0;e<x;e++){for(g[4]=S,h=0;h<T;h++){if(iweapon[t[e].e][t[e].f].perk.k==l[h].k&&iweapon[t[e].e][t[e].f].perk.j==l[h].j){o[l[h].j]>0&&tempperk[h]>0&&S++,o[l[h].j]--,tempperk[h]--,w[4]=l[h].j,u[4]=h;break}w[4]=0,u[4]=20}if(legendaryWeapon||(o[iweapon[t[e].e][t[e].f].cell[0]]>0&&S++,o[iweapon[t[e].e][t[e].f].cell[0]]--,o[iweapon[t[e].e][t[e].f].cell[1]]>0&&S++,o[iweapon[t[e].e][t[e].f].cell[1]]--),legendaryWeapon&&(S+=2),0==greenLight&&S>11&&GreenLight(),S>3)for(a=0;a<s[0];a++){for(g[0]=S,h=0;h<T;h++){if(iarmor[0][p[0][a]].perk.k==l[h].k&&iarmor[0][p[0][a]].perk.j==l[h].j){o[l[h].j]>0&&tempperk[h]>0&&S++,o[l[h].j]--,tempperk[h]--,w[0]=l[h].j,u[0]=h;break}w[0]=0,u[0]=20}if(o[iarmor[0][p[0][a]].cell]>0&&S++,o[iarmor[0][p[0][a]].cell]--,0==greenLight&&S>11&&GreenLight(),S>5)for(b=0;b<s[1];b++){for(g[1]=S,h=0;h<T;h++){if(iarmor[1][p[1][b]].perk.k==l[h].k&&iarmor[1][p[1][b]].perk.j==l[h].j){o[l[h].j]>0&&tempperk[h]>0&&S++,o[l[h].j]--,tempperk[h]--,w[1]=l[h].j,u[1]=h;break}w[1]=0,u[1]=20}if(o[iarmor[1][p[1][b]].cell]>0&&S++,o[iarmor[1][p[1][b]].cell]--,0==greenLight&&S>11&&GreenLight(),S>7)for(g[2]=S,c=0;c<s[2];c++){for(h=0;h<T;h++){if(iarmor[2][p[2][c]].perk.k==l[h].k&&iarmor[2][p[2][c]].perk.j==l[h].j){o[l[h].j]>0&&tempperk[h]>0&&S++,o[l[h].j]--,tempperk[h]--,w[2]=l[h].j,u[2]=h;break}w[2]=0,u[2]=20}if(o[iarmor[2][p[2][c]].cell]>0&&S++,o[iarmor[2][p[2][c]].cell]--,S>9)for(g[3]=S,d=0;d<s[3];d++){for(h=0;h<T;h++){if(iarmor[3][p[3][d]].perk.k==l[h].k&&iarmor[3][p[3][d]].perk.j==l[h].j){o[l[h].j]>0&&tempperk[h]>0&&S++,o[l[h].j]--,tempperk[h]--,w[3]=l[h].j,u[3]=h;break}w[3]=0,u[3]=20}o[iarmor[3][p[3][d]].cell]>0&&S++,o[iarmor[3][p[3][d]].cell]--,S>11&&(filtSet.push([p[0][a],p[1][b],p[2][c],p[3][d],t[e].e,t[e].f]),0),S=g[3],0!=w[3]&&o[w[3]]++,o[iarmor[3][p[3][d]].cell]++,20!=u[3]&&tempperk[u[3]]++}S=g[2],0!=w[2]&&o[w[2]]++,o[iarmor[2][p[2][c]].cell]++,20!=u[2]&&tempperk[u[2]]++}S=g[1],0!=w[1]&&o[w[1]]++,o[iarmor[1][p[1][b]].cell]++,20!=u[1]&&tempperk[u[1]]++}S=g[0],0!=w[0]&&o[w[0]]++,o[iarmor[0][p[0][a]].cell]++,20!=u[0]&&tempperk[u[0]]++}S=g[4],0!=w[4]&&o[w[4]]++,legendaryWeapon||(o[iweapon[t[e].e][t[e].f].cell[0]]++,o[iweapon[t[e].e][t[e].f].cell[1]]++),20!=u[4]&&tempperk[u[4]]++}filtSet=filtSet.sort(sortMatrix),this.console.timeEnd("search");var P,v=[],W=[],M=[],B=[],R=filtSet.length,D=[],E=C+3,I=perkListLength.length;for(i=0;i<E;i++)D.push(!1),W.push(0);for(i=0;i<I;i++)v.push(0);for(i=0;i<T;i++)tempperk[i]=r[i];if(0==greenLight){for(j=1;j<perkListLength.length;j++)for(k=0;k<perkListLength[j];k++)M.push({j:j,k:k,value:0});for(let e=0;e<R;e++){for(filtSetCells.push([]),B=[],P=[],j=0;j<E;j++)filtSetCells[e].push({j:0,k:0}),D[j]=!1,W[j]=0;for(h=0;h<T;h++)tempperk[h]=r[h];for(h=0;h<T;h++)for(iweapon[filtSet[e][C]][filtSet[e][C+1]].perk.k==l[h].k&&iweapon[filtSet[e][C]][filtSet[e][C+1]].perk.j==l[h].j&&tempperk[h]--,j=0;j<C;j++)iarmor[j][filtSet[e][j]].perk.k==l[h].k&&iarmor[j][filtSet[e][j]].perk.j==l[h].j&&tempperk[h]--;for(h=0;h<T;h++){for(j=0;j<C;j++)iarmor[j][filtSet[e][j]].cell==l[h].j&&tempperk[h]>0&&0==D[j]&&(filtSetCells[e][j].j=l[h].j,filtSetCells[e][j].k=l[h].k,D[j]=!0,tempperk[h]--);5==l[h].j&&tempperk[h]>0&&0==D[C+2]&&(filtSetCells[e][C+2].j=l[h].j,filtSetCells[e][C+2].k=l[h].k,D[C+2]=!0,tempperk[h]--),legendaryWeapon?(tempperk[h]>0&&0==D[C]&&(filtSetCells[e][C].j=l[h].j,filtSetCells[e][C].k=l[h].k,D[C]=!0,tempperk[h]--),tempperk[h]>0&&0==D[C+1]&&(filtSetCells[e][C+1].j=l[h].j,filtSetCells[e][C+1].k=l[h].k,D[C+1]=!0,tempperk[h]--)):(iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[0]==l[h].j&&tempperk[h]>0&&0==D[C]&&(filtSetCells[e][C].j=l[h].j,filtSetCells[e][C].k=l[h].k,D[C]=!0,tempperk[h]--),iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[1]==l[h].j&&tempperk[h]>0&&0==D[C+1]&&(filtSetCells[e][C+1].j=l[h].j,filtSetCells[e][C+1].k=l[h].k,D[C+1]=!0,tempperk[h]--))}for(j=0;j<C;j++)0==D[j]&&(W[iarmor[j][filtSet[e][j]].cell]++,v[iarmor[j][filtSet[e][j]].cell]<W[iarmor[j][filtSet[e][j]].cell]&&(v[iarmor[j][filtSet[e][j]].cell]=W[iarmor[j][filtSet[e][j]].cell]));if(legendaryWeapon){if(0==D[C+1]&&0==D[C])for(let e=1;e<perkListLength.length;e++)W[e]+=2,v[e]<W[e]&&(v[e]=W[e]);else if(0==D[C+1]||0==D[C])for(let e=1;e<perkListLength.length;e++)W[e]++,v[e]<W[e]&&(v[e]=W[e])}else 0==D[C]&&(W[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[0]]++,v[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[0]]<W[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[0]]&&(v[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[0]]=W[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[0]])),0==D[C+1]&&(W[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[1]]++,v[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[1]]<W[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[1]]&&(v[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[1]]=W[iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[1]]));for(0==D[C+2]&&(W[5]++,W[5]>v[5]&&(v[5]=W[5])),j=0;j<C;j++)if(127==iarmor[j][filtSet[e][j]].id)for(k=0;k<f[j];k++)iarmor[j][k].cell==iarmor[j][filtSet[e][j]].cell&&0!=iarmor[j][k].perk.j&&0!=iarmor[j][k].perk.k&&B.push([iarmor[j][k].perk.j,iarmor[j][k].perk.k,j]);else B.push([iarmor[j][filtSet[e][j]].perk.j,iarmor[j][filtSet[e][j]].perk.k,j]);if(127==iweapon[filtSet[e][C]][filtSet[e][C+1]].id)for(j=0;j<y;j++)for(k=0;k<n[j];k++)(iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[0]==iweapon[j][k].cell[0]&&iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[1]==iweapon[j][k].cell[1]||iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[1]==iweapon[j][k].cell[0]&&iweapon[filtSet[e][C]][filtSet[e][C+1]].cell[0]==iweapon[j][k].cell[1])&&0!=iweapon[j][k].perk.j&&0!=iweapon[j][k].perk.k&&B.push([iweapon[j][k].perk.j,iweapon[j][k].perk.k,5]);else B.push([iweapon[filtSet[e][C]][filtSet[e][C+1]].perk.j,iweapon[filtSet[e][C]][filtSet[e][C+1]].perk.k,5]);B.sort(sortMatrix);let i=B.length,t=B.length-1;if(void 0!=B[0]){let e=-1;for(j=0;j<i;j++)if(j<t&&B[j][1]==B[j+1][1]&&B[j][0]==B[j+1][0]&&B[j+1][2]!=B[j][2]?(P.push({j:B[j][0],k:B[j][1],value:2}),j++,e++):(P.push({j:B[j][0],k:B[j][1],value:1}),P[++e].value+=W[P[e].j]),0!=P[e].j&&0!=P[e].k){let l=indexOfPerk(P[e],M);M[l].value<P[e].value&&(M[l].value=P[e].value)}}}var F=[];let e=0;for(M.length;e<M.length;e++)M[e].value<v[M[e].j]&&(M[e].value=v[M[e].j]),F.push({stringID:String(M[e].j)+"_"+String(M[e].k),value:M[e].value});this.postMessage({bonusPerks:F})}}function ExpandfiltSetelem(e,l){let k,r=[],i=e.length;if(l==armorTypeLength)for(let l=0;l<i;l++)for(let i=0;i<weaponTypeLength;i++)for(let t=0;t<weaponLength[i];t++)(iweapon[i][t].cell[0]==iweapon[e[l][armorTypeLength]][e[l][armorTypeLength+1]].cell[0]&&iweapon[i][t].cell[1]==iweapon[e[l][armorTypeLength]][e[l][armorTypeLength+1]].cell[1]||iweapon[i][t].cell[1]==iweapon[e[l][armorTypeLength]][e[l][armorTypeLength+1]].cell[0]&&iweapon[i][t].cell[0]==iweapon[e[l][armorTypeLength]][e[l][armorTypeLength+1]].cell[1])&&127!=iweapon[i][t].id&&((k=e[l].slice())[armorTypeLength]=i,k[armorTypeLength+1]=t,r.push(k));else for(let t=0;t<i;t++)for(let i=0;i<armorLength[l];i++)iarmor[l][e[t][l]].cell==iarmor[l][i].cell&&127!=iarmor[l][i].id&&((k=e[t].slice())[l]=i,r.push(k));return r}function ExpandRecursivefiltSetelem(e,l){let k=l.length,r=ExpandfiltSetelem(e,l[0]);for(let e=1;e<k;e++)r=ExpandfiltSetelem(r,l[e]);return r}function processFiltSetelem(e){let l=[],k=[],r=!0;if(1==greenLight){for(filtSetCells.push([]),tempbonusPerkMat=[],tempbonusPerk=[],j=0;j<setWidth;j++)filtSetCells[e].push({j:0,k:0}),l[j]=!1;for(h=0;h<indexPerkLength;h++)tempperk[h]=indexPerkRank[h];for(h=0;h<indexPerkLength;h++)for(iweapon[filtSet[e][armorTypeLength]][filtSet[e][armorTypeLength+1]].perk.k==indexPerk[h].k&&iweapon[filtSet[e][armorTypeLength]][filtSet[e][armorTypeLength+1]].perk.j==indexPerk[h].j&&tempperk[h]--,j=0;j<armorTypeLength;j++)iarmor[j][filtSet[e][j]].perk.k==indexPerk[h].k&&iarmor[j][filtSet[e][j]].perk.j==indexPerk[h].j&&tempperk[h]--;for(h=0;h<indexPerkLength;h++){for(j=0;j<armorTypeLength;j++)iarmor[j][filtSet[e][j]].cell==indexPerk[h].j&&tempperk[h]>0&&0==l[j]&&(filtSetCells[e][j].j=indexPerk[h].j,filtSetCells[e][j].k=indexPerk[h].k,l[j]=!0,tempperk[h]--);5==indexPerk[h].j&&tempperk[h]>0&&0==l[armorTypeLength+2]&&(filtSetCells[e][armorTypeLength+2].j=indexPerk[h].j,filtSetCells[e][armorTypeLength+2].k=indexPerk[h].k,l[armorTypeLength+2]=!0,tempperk[h]--),legendaryWeapon?(tempperk[h]>0&&0==l[armorTypeLength]&&(filtSetCells[e][armorTypeLength].j=indexPerk[h].j,filtSetCells[e][armorTypeLength].k=indexPerk[h].k,l[armorTypeLength]=!0),tempperk[h]--,tempperk[h]>0&&0==l[armorTypeLength+1]&&(filtSetCells[e][armorTypeLength+1].j=indexPerk[h].j,filtSetCells[e][armorTypeLength+1].k=indexPerk[h].k,l[armorTypeLength+1]=!0,tempperk[h]--)):(iweapon[filtSet[e][armorTypeLength]][filtSet[e][armorTypeLength+1]].cell[0]==indexPerk[h].j&&tempperk[h]>0&&0==l[armorTypeLength]&&(filtSetCells[e][armorTypeLength].j=indexPerk[h].j,filtSetCells[e][armorTypeLength].k=indexPerk[h].k,l[armorTypeLength]=!0,tempperk[h]--),iweapon[filtSet[e][armorTypeLength]][filtSet[e][armorTypeLength+1]].cell[1]==indexPerk[h].j&&tempperk[h]>0&&0==l[armorTypeLength+1]&&(filtSetCells[e][armorTypeLength+1].j=indexPerk[h].j,filtSetCells[e][armorTypeLength+1].k=indexPerk[h].k,l[armorTypeLength+1]=!0,tempperk[h]--))}}for(let l=0;l<armorTypeLength;l++)127==iarmor[l][filtSet[e][l]].id&&(r=!1,k.push(l));return 127==iweapon[filtSet[e][armorTypeLength]][filtSet[e][armorTypeLength+1]].id&&(r=!1,k.push(armorTypeLength)),saveSet=0==r?{id:ExpandRecursivefiltSetelem([filtSet[e]],k),cell:filtSetCells[e]}:{id:[filtSet[e]],cell:filtSetCells[e]},saveSet.id.length>1&&void 0!=saveSet.id[0][0]&&(saveSet.id=saveSet.id.sort(sortFunction)),k.splice(0),r=!0,saveSet}var greenLight=!1,filtSetCells=[],filtSet=[];const sortMatrix=(e,l)=>{for(let k=0;k<e.length;++k){if(e[k]<l[k])return-1;if(e[k]>l[k])return 1}return 0};var lockBool=[],lock=[];iweapon=[[{id:1,cell:[3,1],perk:{j:2,k:1}},{id:2,cell:[1,4],perk:{j:3,k:0}},{id:3,cell:[3,4],perk:{j:5,k:1}},{id:4,cell:[2,4],perk:{j:4,k:6}},{id:5,cell:[0,0],perk:{j:0,k:0}},{id:6,cell:[4,5],perk:{j:3,k:7}},{id:7,cell:[3,3],perk:{j:3,k:4}},{id:8,cell:[4,2],perk:{j:4,k:4}},{id:9,cell:[3,5],perk:{j:3,k:8}},{id:11,cell:[4,5],perk:{j:4,k:10}},{id:12,cell:[4,1],perk:{j:3,k:3}},{id:13,cell:[4,1],perk:{j:4,k:0}},{id:14,cell:[4,3],perk:{j:4,k:5}},{id:15,cell:[4,5],perk:{j:4,k:12}},{id:16,cell:[4,2],perk:{j:2,k:1}},{id:17,cell:[4,5],perk:{j:4,k:5}},{id:18,cell:[4,1],perk:{j:3,k:3}},{id:19,cell:[4,2],perk:{j:2,k:6}},{id:20,cell:[4,2],perk:{j:5,k:1}},{id:23,cell:[3,5],perk:{j:3,k:0}}],[{id:1,cell:[3,1],perk:{j:2,k:1}},{id:2,cell:[1,3],perk:{j:3,k:0}},{id:3,cell:[3,1],perk:{j:5,k:1}},{id:4,cell:[2,3],perk:{j:4,k:6}},{id:5,cell:[0,0],perk:{j:0,k:0}},{id:6,cell:[3,5],perk:{j:3,k:7}},{id:7,cell:[3,3],perk:{j:3,k:4}},{id:8,cell:[3,4],perk:{j:3,k:1}},{id:9,cell:[3,5],perk:{j:3,k:8}},{id:11,cell:[3,5],perk:{j:4,k:10}},{id:12,cell:[3,1],perk:{j:3,k:3}},{id:13,cell:[3,1],perk:{j:4,k:0}},{id:14,cell:[3,2],perk:{j:4,k:5}},{id:15,cell:[4,5],perk:{j:4,k:12}},{id:16,cell:[3,2],perk:{j:2,k:1}},{id:17,cell:[3,5],perk:{j:4,k:5}},{id:18,cell:[3,1],perk:{j:3,k:3}},{id:19,cell:[3,2],perk:{j:2,k:6}},{id:20,cell:[3,2],perk:{j:5,k:5}},{id:23,cell:[3,5],perk:{j:3,k:0}}],[{id:1,cell:[3,1],perk:{j:2,k:1}},{id:2,cell:[4,1],perk:{j:3,k:0}},{id:3,cell:[4,3],perk:{j:5,k:1}},{id:4,cell:[4,2],perk:{j:4,k:6}},{id:5,cell:[0,0],perk:{j:0,k:0}},{id:6,cell:[4,5],perk:{j:3,k:7}},{id:7,cell:[3,3],perk:{j:3,k:4}},{id:8,cell:[4,2],perk:{j:4,k:4}},{id:9,cell:[3,5],perk:{j:3,k:8}},{id:11,cell:[4,5],perk:{j:4,k:2}},{id:12,cell:[4,1],perk:{j:4,k:11}},{id:13,cell:[4,1],perk:{j:4,k:0}},{id:14,cell:[4,3],perk:{j:4,k:5}},{id:15,cell:[4,5],perk:{j:4,k:12}},{id:16,cell:[4,2],perk:{j:2,k:1}},{id:17,cell:[4,5],perk:{j:4,k:5}},{id:18,cell:[4,1],perk:{j:4,k:11}},{id:19,cell:[4,2],perk:{j:2,k:6}},{id:20,cell:[4,2],perk:{j:5,k:5}},{id:23,cell:[3,5],perk:{j:3,k:0}}],[{id:1,cell:[3,1],perk:{j:2,k:1}},{id:2,cell:[3,1],perk:{j:3,k:0}},{id:24,cell:[3,1],perk:{j:0,k:0}},{id:3,cell:[3,1],perk:{j:5,k:1}},{id:4,cell:[3,2],perk:{j:4,k:6}},{id:5,cell:[0,0],perk:{j:0,k:0}},{id:6,cell:[3,5],perk:{j:3,k:7}},{id:7,cell:[3,3],perk:{j:3,k:4}},{id:8,cell:[3,4],perk:{j:3,k:1}},{id:9,cell:[3,5],perk:{j:3,k:8}},{id:11,cell:[3,5],perk:{j:4,k:10}},{id:12,cell:[3,1],perk:{j:3,k:3}},{id:13,cell:[3,1],perk:{j:4,k:0}},{id:14,cell:[3,2],perk:{j:4,k:5}},{id:15,cell:[4,5],perk:{j:4,k:12}},{id:16,cell:[3,2],perk:{j:2,k:1}},{id:17,cell:[3,5],perk:{j:4,k:5}},{id:18,cell:[3,1],perk:{j:3,k:3}},{id:19,cell:[3,2],perk:{j:2,k:6}},{id:20,cell:[3,2],perk:{j:5,k:1}},{id:23,cell:[3,5],perk:{j:3,k:0}}],[{id:5,cell:[4,2],perk:{j:0,k:0}},{id:5,cell:[4,2],perk:{j:0,k:0}}],[{id:1,cell:[3,1],perk:{j:2,k:1}},{id:2,cell:[3,1],perk:{j:3,k:0}},{id:3,cell:[3,5],perk:{j:5,k:1}},{id:4,cell:[4,2],perk:{j:4,k:6}},{id:5,cell:[0,0],perk:{j:0,k:0}},{id:5,cell:[0,0],perk:{j:0,k:0}},{id:6,cell:[1,5],perk:{j:3,k:7}},{id:7,cell:[3,3],perk:{j:3,k:4}},{id:8,cell:[4,2],perk:{j:4,k:4}},{id:9,cell:[3,5],perk:{j:3,k:8}},{id:11,cell:[2,5],perk:{j:4,k:2}},{id:12,cell:[3,1],perk:{j:3,k:3}},{id:13,cell:[4,1],perk:{j:4,k:0}},{id:14,cell:[4,5],perk:{j:4,k:5}},{id:15,cell:[4,5],perk:{j:4,k:12}},{id:16,cell:[2,2],perk:{j:2,k:1}},{id:25,cell:[3,5],perk:{j:0,k:0}},{id:17,cell:[3,5],perk:{j:4,k:5}},{id:18,cell:[3,1],perk:{j:3,k:3}},{id:19,cell:[4,2],perk:{j:2,k:6}},{id:20,cell:[4,2],perk:{j:5,k:5}},{id:23,cell:[3,5],perk:{j:3,k:0}}],[{id:1,cell:[3,1],perk:{j:2,k:1}},{id:2,cell:[4,1],perk:{j:3,k:0}},{id:3,cell:[4,3],perk:{j:5,k:1}},{id:4,cell:[4,2],perk:{j:4,k:6}},{id:5,cell:[0,0],perk:{j:0,k:0}},{id:6,cell:[4,5],perk:{j:3,k:7}},{id:7,cell:[3,3],perk:{j:3,k:4}},{id:8,cell:[4,2],perk:{j:4,k:4}},{id:9,cell:[3,5],perk:{j:3,k:8}},{id:11,cell:[4,5],perk:{j:4,k:2}},{id:12,cell:[4,1],perk:{j:4,k:11}},{id:13,cell:[4,1],perk:{j:4,k:0}},{id:14,cell:[4,3],perk:{j:4,k:5}},{id:26,cell:[4,3],perk:{j:0,k:0}},{id:15,cell:[4,5],perk:{j:4,k:12}},{id:16,cell:[4,2],perk:{j:2,k:1}},{id:17,cell:[4,5],perk:{j:4,k:5}},{id:18,cell:[4,1],perk:{j:4,k:11}},{id:19,cell:[4,2],perk:{j:2,k:6}},{id:20,cell:[4,2],perk:{j:5,k:5}},{id:23,cell:[3,5],perk:{j:3,k:0}}],[{id:127,cell:[1,3],perk:{j:0,k:0}},{id:127,cell:[1,4],perk:{j:0,k:0}},{id:127,cell:[1,5],perk:{j:0,k:0}},{id:127,cell:[2,2],perk:{j:0,k:0}},{id:127,cell:[2,3],perk:{j:0,k:0}},{id:127,cell:[2,4],perk:{j:0,k:0}},{id:127,cell:[2,5],perk:{j:0,k:0}},{id:127,cell:[3,3],perk:{j:0,k:0}},{id:127,cell:[3,4],perk:{j:0,k:0}},{id:127,cell:[3,5],perk:{j:0,k:0}},{id:127,cell:[4,5],perk:{j:0,k:0}}]],iarmor=[[{id:0,cell:1,perk:{j:1,k:8}},{id:1,cell:5,perk:{j:2,k:1}},{id:24,cell:1,perk:{j:0,k:0}},{id:2,cell:1,perk:{j:1,k:2}},{id:3,cell:3,perk:{j:5,k:1}},{id:4,cell:2,perk:{j:4,k:6}},{id:5,cell:0,perk:{j:0,k:0}},{id:6,cell:1,perk:{j:1,k:1}},{id:7,cell:4,perk:{j:3,k:7}},{id:8,cell:2,perk:{j:1,k:9}},{id:9,cell:4,perk:{j:2,k:0}},{id:10,cell:2,perk:{j:2,k:5}},{id:11,cell:5,perk:{j:5,k:8}},{id:12,cell:3,perk:{j:3,k:3}},{id:13,cell:1,perk:{j:4,k:10}},{id:14,cell:4,perk:{j:5,k:4}},{id:26,cell:4,perk:{j:0,k:0}},{id:15,cell:5,perk:{j:5,k:1}},{id:16,cell:4,perk:{j:2,k:3}},{id:17,cell:3,perk:{j:3,k:6}},{id:25,cell:3,perk:{j:0,k:0}},{id:18,cell:1,perk:{j:1,k:12}},{id:19,cell:2,perk:{j:2,k:4}},{id:20,cell:4,perk:{j:5,k:5}},{id:21,cell:5,perk:{j:5,k:3}},{id:22,cell:5,perk:{j:5,k:12}},{id:23,cell:3,perk:{j:5,k:7}},{id:127,cell:1,perk:{j:0,k:0}},{id:127,cell:2,perk:{j:0,k:0}},{id:127,cell:3,perk:{j:0,k:0}},{id:127,cell:4,perk:{j:0,k:0}},{id:127,cell:5,perk:{j:0,k:0}}],[{id:0,cell:5,perk:{j:1,k:8}},{id:1,cell:1,perk:{j:3,k:6}},{id:2,cell:5,perk:{j:3,k:0}},{id:3,cell:3,perk:{j:5,k:1}},{id:4,cell:2,perk:{j:4,k:6}},{id:5,cell:0,perk:{j:0,k:0}},{id:6,cell:1,perk:{j:1,k:12}},{id:7,cell:4,perk:{j:4,k:8}},{id:8,cell:4,perk:{j:4,k:4}},{id:9,cell:5,perk:{j:4,k:9}},{id:10,cell:4,perk:{j:3,k:0}},{id:11,cell:1,perk:{j:5,k:8}},{id:12,cell:3,perk:{j:1,k:3}},{id:13,cell:4,perk:{j:4,k:10}},{id:14,cell:5,perk:{j:4,k:5}},{id:15,cell:5,perk:{j:5,k:4}},{id:16,cell:2,perk:{j:2,k:3}},{id:17,cell:3,perk:{j:3,k:6}},{id:18,cell:1,perk:{j:1,k:4}},{id:19,cell:2,perk:{j:4,k:1}},{id:20,cell:2,perk:{j:5,k:5}},{id:21,cell:4,perk:{j:4,k:5}},{id:22,cell:3,perk:{j:3,k:3}},{id:23,cell:3,perk:{j:1,k:7}},{id:127,cell:1,perk:{j:0,k:0}},{id:127,cell:2,perk:{j:0,k:0}},{id:127,cell:3,perk:{j:0,k:0}},{id:127,cell:4,perk:{j:0,k:0}},{id:127,cell:5,perk:{j:0,k:0}}],[{id:0,cell:1,perk:{j:1,k:11}},{id:1,cell:3,perk:{j:3,k:6}},{id:2,cell:5,perk:{j:3,k:6}},{id:3,cell:5,perk:{j:3,k:8}},{id:4,cell:4,perk:{j:1,k:2}},{id:5,cell:0,perk:{j:0,k:0}},{id:6,cell:3,perk:{j:3,k:7}},{id:7,cell:3,perk:{j:4,k:8}},{id:8,cell:2,perk:{j:2,k:1}},{id:9,cell:3,perk:{j:4,k:6}},{id:10,cell:4,perk:{j:4,k:9}},{id:11,cell:5,perk:{j:5,k:1}},{id:12,cell:1,perk:{j:3,k:3}},{id:13,cell:4,perk:{j:4,k:2}},{id:14,cell:4,perk:{j:5,k:4}},{id:15,cell:2,perk:{j:2,k:3}},{id:16,cell:2,perk:{j:4,k:11}},{id:17,cell:5,perk:{j:5,k:8}},{id:18,cell:1,perk:{j:1,k:3}},{id:19,cell:2,perk:{j:1,k:13}},{id:20,cell:2,perk:{j:1,k:6}},{id:21,cell:3,perk:{j:1,k:7}},{id:22,cell:3,perk:{j:3,k:4}},{id:23,cell:1,perk:{j:5,k:7}},{id:127,cell:1,perk:{j:0,k:0}},{id:127,cell:2,perk:{j:0,k:0}},{id:127,cell:3,perk:{j:0,k:0}},{id:127,cell:4,perk:{j:0,k:0}},{id:127,cell:5,perk:{j:0,k:0}}],[{id:0,cell:1,perk:{j:1,k:3}},{id:1,cell:4,perk:{j:1,k:5}},{id:2,cell:3,perk:{j:3,k:6}},{id:3,cell:5,perk:{j:2,k:4}},{id:4,cell:1,perk:{j:2,k:3}},{id:5,cell:0,perk:{j:0,k:0}},{id:6,cell:3,perk:{j:1,k:12}},{id:7,cell:3,perk:{j:1,k:3}},{id:8,cell:3,perk:{j:2,k:1}},{id:9,cell:5,perk:{j:4,k:9}},{id:10,cell:4,perk:{j:3,k:0}},{id:11,cell:1,perk:{j:1,k:6}},{id:12,cell:1,perk:{j:1,k:13}},{id:13,cell:4,perk:{j:1,k:9}},{id:14,cell:2,perk:{j:2,k:0}},{id:15,cell:2,perk:{j:5,k:4}},{id:16,cell:2,perk:{j:1,k:1}},{id:17,cell:5,perk:{j:1,k:7}},{id:18,cell:1,perk:{j:1,k:4}},{id:19,cell:5,perk:{j:4,k:1}},{id:20,cell:2,perk:{j:5,k:2}},{id:21,cell:4,perk:{j:4,k:5}},{id:22,cell:3,perk:{j:3,k:3}},{id:23,cell:5,perk:{j:3,k:0}},{id:127,cell:1,perk:{j:0,k:0}},{id:127,cell:2,perk:{j:0,k:0}},{id:127,cell:3,perk:{j:0,k:0}},{id:127,cell:4,perk:{j:0,k:0}},{id:127,cell:5,perk:{j:0,k:0}}]],perkListLength=[1,14,9,10,13,13];const sortFunction=(e,l)=>{let k=e.length;for(let r=0;r<k;r++)return e[r]<l[r]?-1:1;return 0};var indexPerk,indexPerkRank,indexPerkLength,legendaryWeapon=!1,filtSetCount=0,filtSetLength=0,cacheSet=[],cacheSetCount=0,cacheSetLength=0,setCount=0,weaponLength=[],armorLength=[],setWidth=iarmor.length+3,armorTypeLength=iarmor.length,weaponTypeLength=iweapon.length;for(i=0;i<weaponTypeLength;i++)weaponLength.push(iweapon[i].length);armorTypeLength=iarmor.length;for(i=0;i<armorTypeLength;i++)armorLength.push(iarmor[i].length);this.onmessage=function(e){if(void 0!=e.data.indexPerk){if(indexPerk=e.data.indexPerk,indexPerkRank=e.data.indexPerkRank,indexPerkLength=indexPerk.length,legendaryWeapon=e.data.legendaryWeapon,-1!=(lock=e.data.lock))for(i=0;i<lock.length;i++)lock[i].length>0?lockBool.push(!0):lockBool.push(!1);else for(i=0;i<setWidth.length;i++)lockBool.push(!1);greenLight=!1,filtSetCells=[],filtSet=[],labelCount=0,search(indexPerk,indexPerkRank,lock),filtSetLength=filtSet.length,cacheSet=processFiltSetelem(filtSetCount),this.console.log(cacheSet),cacheSetLength=cacheSet.id.length,filtSetCount++,this.postMessage({set:{id:cacheSet.id[cacheSetCount],cell:cacheSet.cell}}),cacheSetCount++}-23==e.data&&(filtSetCount<filtSetLength&&setCount<100?cacheSetCount<cacheSetLength&&setCount<100?(this.postMessage({set:{id:cacheSet.id[cacheSetCount],cell:cacheSet.cell}}),cacheSetCount++,setCount++):(cacheSetCount=0,cacheSet=processFiltSetelem(filtSetCount),cacheSetLength=cacheSet.id.length-3,filtSetCount++,this.postMessage({set:{id:cacheSet.id[cacheSetCount],cell:cacheSet.cell}}),cacheSetCount++):self.close())};