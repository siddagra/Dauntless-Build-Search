function windowResize(){document.getElementsByTagName("html")[0].style.zoom=window.innerWidth/1920}function encode(e,t=encodingChars.length){let n="0";for(let l=0;l<e.length;l++){0!=l&&(n+="_");let i=e[l];if(0==i.length)continue;let r=Math.max.apply(null,i)+1,s=[],o=[];for(let e=1;e<10;e++)s.push(e*(Math.log10(r)/Math.log10(t))),o.push(s[e-1]%1);let a=Math.max.apply(null,o),d=o.indexOf(a)+1,c=Math.ceil(s[d-1]),p=r;n+=encodingChars.substr(p%t,1),p=Math.floor(p/t),n+=encodingChars.substr(p%t,1);for(let e=i.length;e%d!=0;e++)i.push(0);for(let e=0;e<i.length;e+=d){let l=0;for(let t=0;t<d;t++)l=l*r+i[e+t];for(let e=0;e<c;e++)n+=encodingChars.substr(l%t,1),l=Math.floor(l/t)}}return n}function decode(e,t=encodingChars.length){if(urlVersion=encodingChars.indexOf(e[0]),"0"==e[0]){let n=[];e=(e=e.substr(1)).split("_");for(let l=0;l<e.length;l++){n.push([]);let i=e[l].split("").map(e=>encodingChars.indexOf(e)),r=0;r=(r=r*t+i[1])*t+i[0],i.shift(),i.shift();let s=[],o=[];for(let e=1;e<10;e++)s.push(e*(Math.log10(r)/Math.log10(t))),o.push(s[e-1]%1);let a=Math.max.apply(null,o),d=o.indexOf(a)+1,c=Math.ceil(s[d-1]);for(let e=0;e<i.length;e+=c){let s=0,o=[];for(let n=c-1;0<=n;n--)s=s*t+i[e+n];for(let e=0;e<d;e++)o.push(s%r),s=Math.floor(s/r);o=o.reverse();for(let e=0;e<d&&0!=o[e];e++)n[l].push(o[e])}}return n}return-1}function EmployWorkers(){window.scrollY>367&&window.scrollTo(0,0);var e=[],t=[];urlPerks=[],urlLocks=[];var n=document.getElementsByClassName("PerkCard");for(i=0;i<n.length;i++)e.push({j:parseInt(n[i].id.split("_")[0]),k:parseInt(n[i].id.split("_")[1])}),t.push(parseInt(n[i].children[1].firstChild.textContent.split(" ")[0].substring(1))/3),urlPerks.push(perkButtonIdList.indexOf(n[i].id));for(0==urlPerks.length&&urlPerks.push(0),0==urlPerks.length&&urlPerks.push(0);workerList.length>0;)workerList[0].terminate(),workerList.shift();var l=new Worker("../js/webWorker.min.js");workerList.push(l),workerList[0].postMessage({indexPerk:e,indexPerkRank:t,lock:getLockIndices()}),history.pushState(null,null,"/fr?"+encode([urlPerks,t,urlLocks])),workerList[0].onmessage=function(e){if(void 0!=e.data.bonusPerks){applyBonusPerksUI(e.data.bonusPerks)}if(void 0!=e.data.set){printTableUI(e.data.set)}}}function applyBonusPerksUI(e){for(i=0;i<e.length;i++)"btn disabled"!=document.getElementById(e[i].stringID).className&&(e[i].value>1?document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus6":e[i].value>0?document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus3":document.getElementById(e[i].stringID).className="PerkButton  waves-effect waves-light btn tooltipped plus0");document.getElementById("Builds Table Body").textContent=""}function clearTableUI(){let e=document.getElementsByTagName("td").length;for(let t=0;t<e;t++)document.getElementsByTagName("td")[t].textContent=""}function printArmorUI(e,t,n){let l=document.createElement("td"),i=document.createElement("div");i.className="PrintEquipment";let r=document.createElement("img");r.src=e.icon,r.className="ArmorIcon",i.appendChild(r);let s=document.createElement("div");s.textContent=e.id,i.appendChild(s),l.appendChild(i),n.appendChild(l)}function printWeaponUI(e,t,n){let l=document.createElement("td"),i=document.createElement("div");i.className="PrintEquipment";let r=document.createElement("img");r.src=e.icon,r.className="ArmorIcon",i.appendChild(r);let s=document.createElement("div");s.textContent=e.type+" "+e.id,i.appendChild(s),l.appendChild(i),n.appendChild(l)}function generateDBurl(e,t){let n=[3,weapon[e.id[4]][e.id[5]].DBmap,15];perkList[e.cell[4].j][e.cell[4].k].type==weapon[e.id[4]][e.id[5]].cells[0]?n.push(perkList[e.cell[4].j][e.cell[4].k].DBmap,perkList[e.cell[5].j][e.cell[5].k].DBmap):perkList[e.cell[4].j][e.cell[4].k].type==weapon[e.id[4]][e.id[5]].cells[1]?n.push(perkList[e.cell[5].j][e.cell[5].k].DBmap,perkList[e.cell[4].j][e.cell[4].k].DBmap):n.push(perkList[e.cell[4].j][e.cell[4].k].DBmap,perkList[e.cell[5].j][e.cell[5].k].DBmap),"Cestes aethériques"==weapon[e.id[4]][e.id[5]].type?n.push(3,2,0,0,0,0):"Hache"==weapon[e.id[4]][e.id[5]].type?n.push(5,3,0,0,0,0):"Épée"==weapon[e.id[4]][e.id[5]].type?n.push(7,8,0,0,0,0):"Chaînes-lames"==weapon[e.id[4]][e.id[5]].type?n.push(5,3,0,0,0,0):"Aetherolance"==weapon[e.id[4]][e.id[5]].type?n.push(5,8,0,0,0,0):"Marteau"==weapon[e.id[4]][e.id[5]].type?n.push(5,1,0,0,0,0):"Répéteurs"==weapon[e.id[4]][e.id[5]].type?n.push(0,8,9,19,0,25):n.push(0,0,0,0,0,0),n.push(head[e.id[0]].DBmap,15,perkList[e.cell[0].j][e.cell[0].k].DBmap,torso[e.id[1]].DBmap,15,perkList[e.cell[1].j][e.cell[1].k].DBmap,arms[e.id[2]].DBmap,15,perkList[e.cell[2].j][e.cell[2].k].DBmap,legs[e.id[3]].DBmap,15,perkList[e.cell[3].j][e.cell[3].k].DBmap,2,perkList[e.cell[6].j][e.cell[6].k].DBmap);let l=document.createElement("td"),i=document.createElement("a");i.href="https://www.dauntless-builder.com/b/"+hashids.encode(n),i.target="_blank";let r=document.createElement("img");r.src="../assets/export.png",r.className="ArmorIcon",i.appendChild(r),l.appendChild(i),t.appendChild(l)}function printTableUI(e){let t=document.createElement("tr");printArmorUI(head[e.id[0]],e.cell[0],t),printArmorUI(torso[e.id[1]],e.cell[1],t),printArmorUI(arms[e.id[2]],e.cell[2],t),printArmorUI(legs[e.id[3]],e.cell[3],t),printWeaponUI(weapon[e.id[4]][e.id[5]],[e.cell[4],e.cell[5]],t),generateDBurl(e,t),BuildsFoundTable.appendChild(t),workerList[0].postMessage(-23)}function PerkClicked(e){let t;t=e.target.classList.contains("plus6")?"6":"3",e.target.className="btn disabled";let n=document.createElement("div");n.className="animated bounceInLeft faster",document.getElementById("SelectedPerks").appendChild(n);let l=document.createElement("div");l.className="displayHorizontal",l.id=e.target.id,n.appendChild(l);let i=document.createElement("div");i.className="rankChange",l.appendChild(i);let r=document.createElement("img");r.className="rankIcon waves-effect",r.src="../assets/upArrow.png",r.addEventListener("click",PlusButtonCLicked),i.appendChild(r);let s=document.createElement("img");s.className="rankIcon",s.src="../assets/downArrow.png",s.addEventListener("click",MinusButtonCLicked),i.appendChild(s);let o=document.createElement("div");o.className="PerkCard tooltipped",o.setAttribute("data-position","left");let a="";for(let t=0;t<Object.keys(perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects).length;t++)a=a+String(t+1)+": "+perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects[String(t+1)].description+"\n";o.setAttribute("data-tooltip",a),o.id=e.target.id,l.appendChild(o),hasTouch()||M.Tooltip.init(o,{outDuration:0,inDuration:400,enterDelay:500,margin:0,transitionMovement:3});let d=document.createElement("div"),c=document.createElement("img");d.className="PerkCardIcon",c.src="../assets/icons/perks/"+cellType[e.target.id.split("_")[0]]+".png",d.appendChild(c),o.appendChild(d);let p=document.createElement("div");p.className="PerkCardText",o.appendChild(p);let m=document.createElement("div");m.className="PerkCardTitle",m.appendChild(document.createTextNode("+"+t+" "+e.target.textContent)),p.appendChild(m),divPerkCardContent=document.createElement("div"),divPerkCardContent.appendChild(document.createTextNode(perkList[parseInt(e.target.id.split("_")[0])][parseInt(e.target.id.split("_")[1])].effects[t].description)),p.appendChild(divPerkCardContent),EmployWorkers()}function PlusButtonCLicked(){let e=event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent,t=parseInt(e.split(" ")[0].substring(1)),n=e.substring(e.indexOf(" "));event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent="+"+String(t+3)+" "+n,event.target.parentElement.parentElement.children[1].children[1].children[1].textContent=perkList[parseInt(event.target.parentElement.parentElement.id.split("_")[0])][parseInt(event.target.parentElement.parentElement.id.split("_")[1])].effects[String(t+3)].description,EmployWorkers()}function MinusButtonCLicked(){let e=event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent,t=parseInt(e.split(" ")[0].substring(1)),n=e.substring(e.indexOf(" "));t>3?(event.target.parentElement.parentElement.children[1].children[1].firstChild.textContent="+"+String(t-3)+" "+n,event.target.parentElement.parentElement.children[1].children[1].children[1].textContent=perkList[parseInt(event.target.parentElement.parentElement.id.split("_")[0])][parseInt(event.target.parentElement.parentElement.id.split("_")[1])].effects[String(t-3)].description):(document.getElementById(event.target.parentElement.parentElement.id).className="waves-effect waves-light btn grey lighten-4 black-text",event.target.parentElement.parentElement.parentElement.remove(event.target.parentElement.parentElement)),EmployWorkers()}function CheckAllClicked(){toggleAllChecboxes(-1==getLockIndices()?!0:!1)}function toggleAllChecboxes(e){for(i=0;i<weapon.length;i++)document.getElementById("LockCheckbox 0 "+String(i)).checked=e;for(j=1;j<armorTypeLength+2;j++)if(j<3)for(i=0;i<idList.length;i++)document.getElementById("LockCheckbox "+String(j)+" "+String(i)).checked=e;else for(i=0;i<idList.length-3;i++)document.getElementById("LockCheckbox "+String(j)+" "+String(i)).checked=e}function getLockIndices(){let e=[];for(e.push([]),i=0;i<weapon.length;i++)document.getElementById("LockCheckbox 0_"+String(i)).checked&&(e[0].push(i),urlLocks.push(LockCheckboxIdList.indexOf("LockCheckbox 0_"+String(i))));for(j=1;j<armorTypeLength+2;j++)if(e.push([]),j<3)for(i=0;i<idList.length;i++)document.getElementById("LockCheckbox "+String(j)+"_"+String(i)).checked&&(e[j].push(i),urlLocks.push(LockCheckboxIdList.indexOf("LockCheckbox "+String(j)+"_"+String(i))));else for(i=0;i<idList.length-3;i++)document.getElementById("LockCheckbox "+String(j)+"_"+String(i)).checked&&(e[j].push(i),urlLocks.push(LockCheckboxIdList.indexOf("LockCheckbox "+String(j)+"_"+String(i))));for(i=0;i<e.length;i++)if(e[i].length>0)return e;return-1}function setCookie(e,t,n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3);var i="expires="+l.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"}function saveFilterConfigCookie(){setCookie("FilterConfigURL",window.location.search.split("_")[2],365)}windowResize(),window.addEventListener("DOMContentLoaded",()=>{let e=document.getElementsByClassName("sliding-tabs");for(let n=0;n<e.length;n++){let l=e[n].getElementsByClassName("navWrapper")[0],r=l.getElementsByTagName("a"),s=l.getElementsByClassName("selector")[0],o=l.getElementsByClassName("active")[0];s.style.left=o.offsetLeft+"px",s.style.width=o.clientWidth+"px";for(let l=0;l<r.length;l++)r[l].addEventListener("click",function(l){l.preventDefault(),function(t){e[n].getElementsByClassName("slider")[0].scroll(t.offsetLeft,0)}(document.getElementById(l.target.href.split("#")[1])),t(l.target)});function t(e){o.classList.remove("active"),(o=e).classList.add("active"),s.style.left=o.offsetLeft+"px",s.style.width=o.clientWidth+"px"}let a=new IntersectionObserver(function(e,n){e.forEach(e=>{if(e.isIntersecting)for(let n=0;n<r.length;n++)r[n].href.split("#")[1]==e.target.id&&t(r[n])})},{root:e[n].getElementsByClassName("slider")[0],threshold:.8}),d=document.getElementsByClassName("slide");for(i=0;i<d.length;i++)a.observe(d[i])}});var perkButtonIdList=[];perkButtonIdList.push("");var perkButtonElems=document.querySelectorAll(".PerkButton");for(let e=0;e<perkButtonElems.length;e++)perkButtonElems[e].addEventListener("click",PerkClicked),perkButtonIdList.push(perkButtonElems[e].id);var LockCheckboxIdList=[];LockCheckboxIdList.push("");var LockCheckboxElems=document.querySelectorAll(".LockCheckbox");for(let e=0;e<LockCheckboxElems.length;e++)LockCheckboxElems[e].addEventListener("click",EmployWorkers),LockCheckboxIdList.push(LockCheckboxElems[e].id);var urlVersion,urlRanks=[],urlPerks=[],urlLocks=[];const encodingChars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-~";var workerList=[],armorTypeLength=4,BuildsFoundTable=document.getElementById("Builds Table Body"),hashids=new Hashids.default("spicy",8,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"),queryString=window.location.search.substr(1);if("0"==queryString[0]){queryString.substr(1),queryString=decode(queryString);for(let e=0;e<queryString[0].length;e++)document.getElementById(perkButtonIdList[queryString[0][e]]).click();var PerkCardList=document.getElementsByClassName("PerkCard");for(let e=0;e<queryString[1].length;e++)PerkCardList[e].children[1].firstChild.textContent="+"+String(3*queryString[1][e])+" "+PerkCardList[e].children[1].firstChild.textContent.substring(PerkCardList[e].children[1].firstChild.textContent.indexOf(" ")+1);for(let e=0;e<queryString[2].length;e++)document.getElementById(LockCheckboxIdList[queryString[2][e]]).click();EmployWorkers()}